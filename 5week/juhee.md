## NL 조인

기본적으로 NL조인은 outer, inner 양쪽 테이을 모두 인덱스를 이용한다. Outer 쪽은 사이즈가 크지 않으면 인덱스를 사용하지 않을 수도 있다. Inner 쪽 테이블은 인덱스를 사용하여 관리한다.

NL조인은 `인덱스를 이용한 조인 방식`  이다.

조인 튜닝은 인반적으로 일차적으로는 NL조인부터 고려하는 것이 올바른 순서다. 여러 방안으로 컴토한 결과 NL조인으로 결코 좋은 성능을 내기 어렵다고 판단될 때, 소트 머지 조인이나 해시 조인을 검토한다.

NL조인의 특징

1. 랜덤 액세스 위주의 조인방식 ⇒ 인덱스 구성이 완벽해도 대량 데이터 조인시 NL조인이 불리하다.
2. 한 레코드씩 순차적으로 진행한다.

버전이 올라가면서 오라클은 테이블 Prefetch를 활용하여 테이블을 액세스 하다가 디스크 I/O가 필요해지면 이어서 곧 잃게 될 블록까지 미리 읽어서 버퍼캐시에 적재되도록 변경 되었다.

## 소트 머지 조인

사용하는 경우는 조인 컬럼에 인덱스가 없을 경우 대량 데이터 조인이어서 인덱스가 효과적이지 않을때

1. 소트 단계 : 양쪽 집합을 조인 컬럼기준으로 정렬한다.
2. 머지 단계 : 정렬한 양쪽 집합을 머지 한다.

소트머지 조인이 빠른 이유 양쪽 테이블로부터 조인대상 집합을 일괄적으로 읽어 PGA에 저장한후 조인한다. PGA는 프로세스만을 위한 독립적인 메모리 공간이여서 데이터를 읽을 때 래치 획득과정이 없다. 이에 대량
데이터 조인시에 이득이다.

## 해시 조인

1. Build 단계 : 작은 쪽 테이블을 읽어 해시 테이블을 생성한다.
2. Probe 단계 : 큰쪽 테이블을 읽어 해시 테이블을 탐색하면서 조인한다.

대용랸 BuildInput을 처리하는 경우 분할정복 알고리즘을 활용한다.

1. 수행빈도가 낮고
2. 쿼리 수행시간이 오래 걸리는
3. 대량 데이터 조인할때 사용한다.

## 서브쿼리 조인

1. 인라인 뷰 : From절에 사용한 서브 쿼리
2. 중첩된 서브 쿼리 : Where 절에 사용된 서브 쿼리
3. 스칼라 서브 쿼리 : 한 레코드당 정확히 하나의 값을 반환하는 서브 쿼리다. 주로 SELECT0LIST에서 사용하지만 몇 가지 예외 사항을 제외하면 컬럼이 올 수 있는 대부분 위치에 사용할 수 있다.

서브쿼리를 사용하는 경우 필터링을 통해 미리 양을 줄일 수 있도록 하는것이 중요하다.